# SaveFS Contract Solidity Version

## Usage

### Deploy contract

```
./hardhat.sh run deploy/fs.ts  --network eth
./hardhat.sh run deploy/dns.ts  --network eth
```

### Upgrade contract

```
./hardhat.sh run deploy/upgrade-fs.ts  --network eth
./hardhat.sh run deploy/upgrade-dns.ts  --network eth
```

### Build golang code

```
python build.py
```
Output in ./build/go

## Test Coverage

```
npx hardhat coverage
```

Report:

```
  176 passing (14s)

-----------------|----------|----------|----------|----------|----------------|
File             |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |
-----------------|----------|----------|----------|----------|----------------|
 contracts/      |     59.2 |    37.43 |    65.72 |     57.9 |                |
  Config.sol     |    91.67 |    83.33 |      100 |    95.83 |             47 |
  Dns.sol        |       20 |    12.22 |    17.31 |    28.76 |... 731,739,740 |
  File.sol       |    68.35 |    42.59 |    86.21 |       64 |... 448,497,498 |
  FileExtra.sol  |    69.37 |    43.75 |    83.78 |    67.48 |... 466,477,500 |
  List.sol       |      100 |    72.22 |    66.67 |      100 |                |
  Node.sol       |    82.61 |    69.44 |      100 |    83.52 |... 188,193,194 |
  PDP.sol        |    70.89 |       50 |    47.83 |    68.25 |... 713,720,721 |
  PDPExtra.sol   |    86.11 |    55.56 |      100 |       78 |... 114,116,118 |
  Prove.sol      |    43.32 |    26.53 |       75 |    43.53 |... 517,519,526 |
  ProveExtra.sol |    53.26 |    16.67 |    65.22 |    57.25 |... 339,347,374 |
  Sector.sol     |    84.77 |    52.63 |    95.83 |    81.73 |... 511,512,538 |
  Space.sol      |    55.72 |    35.26 |    84.38 |    50.12 |... 1,1052,1053 |
  Test.sol       |        0 |      100 |        0 |        0 |              6 |
  interface.sol  |      100 |      100 |      100 |      100 |                |
  type.sol       |      100 |      100 |      100 |      100 |                |
-----------------|----------|----------|----------|----------|----------------|
All files        |     59.2 |    37.43 |    65.72 |     57.9 |                |
-----------------|----------|----------|----------|----------|----------------|
```

## Contract size

```
npx hardhat size-contracts 
```

Report:

```
  ·----------------------|--------------|----------------·
 |  Contract Name       ·  Size (KiB)  ·  Change (KiB)  │
 ·······················|··············|·················
 |  NameInfoMapping     ·       0.084  ·                │
 ·······················|··············|·················
 |  PeerPoolMapping     ·       0.084  ·                │
 ·······················|··············|·················
 |  DNSNodeMapping      ·       0.084  ·                │
 ·······················|··············|·················
 |  ChallengeMapping    ·       0.084  ·                │
 ·······················|··············|·················
 |  MerkleNodeMapping   ·       0.084  ·                │
 ·······················|··············|·················
 |  MerklePathMapping   ·       0.084  ·                │
 ·······················|··············|·················
 |  ProofsMapping       ·       0.084  ·                │
 ·······················|··············|·················
 |  IterableMapping     ·       0.084  ·                │
 ·······················|··············|·················
 |  console             ·       0.084  ·                │
 ·······················|··············|·················
 |  AddressUpgradeable  ·       0.084  ·                │
 ·······················|··············|·················
 |  Test                ·       0.115  ·                │
 ·······················|··············|·················
 |  Config              ·       1.455  ·                │
 ·······················|··············|·················
 |  List                ·       3.455  ·                │
 ·······················|··············|·················
 |  PDPExtra            ·       9.446  ·                │
 ·······················|··············|·················
 |  Node                ·      11.351  ·                │
 ·······················|··············|·················
 |  Sector              ·      18.896  ·                │
 ·······················|··············|·················
 |  ProveExtra          ·      19.037  ·                │
 ·······················|··············|·················
 |  FileExtra           ·      19.921  ·                │
 ·······················|··············|·················
 |  Space               ·      20.565  ·                │
 ·······················|··············|·················
 |  Dns                 ·      20.892  ·                │
 ·······················|··············|·················
 |  Prove               ·      20.975  ·                │
 ·······················|··············|·················
 |  File                ·      23.013  ·                │
 ·······················|··············|·················
 |  PDP                 ·      23.126  ·                │
 ·----------------------|--------------|----------------·
```
