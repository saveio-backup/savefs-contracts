# SaveFS Contract Solidity Version

## Usage

### Deploy contract

```
./hardhat.sh run deploy/fs.ts  --network eth
./hardhat.sh run deploy/dns.ts  --network eth
```

### Upgrade contract

```
./hardhat.sh run deploy/upgrade-fs.ts  --network eth
./hardhat.sh run deploy/upgrade-dns.ts  --network eth
```

### Build golang code

```
python build.py
```
Output in ./build/go

## Test Coverage

```
npx hardhat coverage
```

Report:

```
  171 passing (13s)

-----------------|----------|----------|----------|----------|----------------|
File             |  % Stmts | % Branch |  % Funcs |  % Lines |Uncovered Lines |
-----------------|----------|----------|----------|----------|----------------|
 contracts/      |    58.39 |    38.32 |    67.27 |    57.77 |                |
  Config.sol     |    95.83 |    83.33 |      100 |    95.83 |             47 |
  Dns.sol        |    29.76 |     12.5 |    17.31 |    28.76 |... 731,739,740 |
  File.sol       |    67.27 |    42.31 |    86.21 |       64 |... 448,497,498 |
  FileExtra.sol  |    69.08 |    43.75 |    83.78 |    67.48 |... 466,477,500 |
  List.sol       |      100 |    81.25 |    66.67 |      100 |                |
  Node.sol       |    81.11 |    67.65 |      100 |    81.32 |... 188,193,194 |
  PDP.sol        |     78.3 |    53.85 |    63.04 |    75.77 |... 708,717,718 |
  Prove.sol      |     43.1 |       25 |       75 |    42.02 |... 517,519,526 |
  ProveExtra.sol |    60.47 |    23.53 |     61.9 |    60.74 |... 335,343,370 |
  Sector.sol     |    87.41 |    65.22 |    95.45 |    87.84 |... 392,393,420 |
  Space.sol      |    50.25 |    38.27 |    84.38 |    50.12 |... 1,1052,1053 |
  Test.sol       |        0 |      100 |        0 |        0 |              6 |
  interface.sol  |      100 |      100 |      100 |      100 |                |
  type.sol       |      100 |      100 |      100 |      100 |                |
-----------------|----------|----------|----------|----------|----------------|
All files        |    58.39 |    38.32 |    67.27 |    57.77 |                |
-----------------|----------|----------|----------|----------|----------------|
```

## Contract size

```
npx hardhat size-contracts 
```

Report:

```
  ·----------------------|--------------|----------------·
 |  Contract Name       ·  Size (KiB)  ·  Change (KiB)  │
 ·······················|··············|·················
 |  DNSNodeMapping      ·       0.084  ·                │
 ·······················|··············|·················
 |  PeerPoolMapping     ·       0.084  ·                │
 ·······················|··············|·················
 |  NameInfoMapping     ·       0.084  ·                │
 ·······················|··············|·················
 |  ChallengeMapping    ·       0.084  ·                │
 ·······················|··············|·················
 |  MerklePathMapping   ·       0.084  ·                │
 ·······················|··············|·················
 |  ProofsMapping       ·       0.084  ·                │
 ·······················|··············|·················
 |  IterableMapping     ·       0.084  ·                │
 ·······················|··············|·················
 |  MerkleNodeMapping   ·       0.084  ·                │
 ·······················|··············|·················
 |  console             ·       0.084  ·                │
 ·······················|··············|·················
 |  AddressUpgradeable  ·       0.084  ·                │
 ·······················|··············|·················
 |  Test                ·       0.115  ·                │
 ·······················|··············|·················
 |  Config              ·       1.455  ·                │
 ·······················|··············|·················
 |  List                ·       3.339  ·                │
 ·······················|··············|·················
 |  Node                ·      11.247  ·                │
 ·······················|··············|·················
 |  Sector              ·      15.663  ·                │
 ·······················|··············|·················
 |  PDP                 ·      17.856  ·                │
 ·······················|··············|·················
 |  ProveExtra          ·      18.175  ·        +5.175  │
 ·······················|··············|·················
 |  FileExtra           ·      19.390  ·                │
 ·······················|··············|·················
 |  Space               ·      20.306  ·                │
 ·······················|··············|·················
 |  Prove               ·      20.645  ·        -3.465  │
 ·······················|··············|·················
 |  Dns                 ·      20.786  ·                │
 ·······················|··············|·················
 |  File                ·      22.626  ·                │
 ·----------------------|--------------|----------------·
```
